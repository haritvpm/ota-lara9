!function(e){function t(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=57)}({57:function(e,t,n){e.exports=n(58)},58:function(e,t){new Vue({el:"#app",data:{empname:"",emppen:"",sitting_date:moment(new Date,"DD MM YYYY").format("DD-MM-YYYY"),sitting_date_display:"",list:[],myerrors:[],mysuccess:[]},mounted:function(){this.datechange()},watch:{emppen:function(){this.empname="",this.list=[],this.myerrors=[],this.mysuccess=[],this.emppen.length>=3&&this.asyncFind()}},computed:{configdate:function(){return{format:"DD-MM-YYYY",useCurrent:!0,showTodayButton:!0,maxDate:new Date,enabledDates:Object.keys(calenderdaysmap).map(function(e){return moment(e,"DD-MM-YYYY").format("YYYY-MM-DD")})}}},methods:{asyncFind:_.debounce(function(){var e=this;e.empname="Searching...",this.mydelayedsearch(e.emppen.trim())},300),mydelayedsearch:function(e){var t=this;if(t.list=[],this.myerrors=[],this.mysuccess=[],!calenderdaysmap.hasOwnProperty(this.sitting_date))return void this.myerrors.push("Please select a sitting day");if(e.length>=3){t.empname="Searching...";var n=t.emppen+"|"+moment(t.sitting_date,"DD MM YYYY").format("DD-MM-YYYY");axios.get(urlajaxpen+"/"+n).then(function(e){if(e.data.pen_names.length)for(var n=0;n<e.data.pen_names.length;n++)t.list.push({name:e.data.pen_names[n],desig:e.data.pen_names_to_desig[e.data.pen_names[n]],absent:e.data.pen_names_to_absent[e.data.pen_names[n]]});else t.myerrors.push(t.emppen+" not found")}).catch(function(e){t.myerrors.push(t.emppen+" not found")})}},datechange:function(){calenderdaysmap.hasOwnProperty(this.sitting_date)?0!=moment().diff(moment(this.sitting_date,"DD MM YYYY"),"days")?this.sitting_date_display=moment(this.sitting_date,"DD MM YYYY").fromNow()+" (session: "+calenderdaysmap[this.sitting_date]+")":this.sitting_date_display="Today (session: "+calenderdaysmap[this.sitting_date]+")":this.sitting_date_display="Not a sitting day",this.emppen="",this.myerrors=[],this.mysuccess=[]},mark:function(e){var t=this;this.myerrors=[],this.mysuccess=[];var n=t.list[e].name+"|"+moment(t.sitting_date,"DD MM YYYY").format("DD-MM-YYYY");axios.get(urlajaxpenupdate+"/"+n).then(function(n){n.data?n.data.res?(n.data.absent?t.myerrors.push(t.list[e].name+" marked as absent/late"):t.mysuccess.push(t.list[e].name+" marked as present"),t.list=[],t.list.push({name:n.data.name,desig:n.data.desig,absent:n.data.absent})):t.myerrors.push(t.list[e].name+" unable to change attendance"):t.emppen=""}).catch(function(e){})}}})}});