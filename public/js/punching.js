(()=>{var e;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){return moment(e,["HH:mm","h:mm A"]).format("HH:mm")}var i=new Vue({el:"#app",data:{isProcessing:!1,form:{},errors:{},myerrors:[],muloptions:designations,pen_names:[],pen_names_to_desig:[],configtime:{format:"HH:mm",stepping:15}},created:function(){Vue.set(this.$data,"form",_form);var e=this;this.$watch("form.pen",(function(n,t){e.onChange()}))},mounted:function(){},computed:{configdate:function(){return{format:"DD-MM-YYYY",useCurrent:!1,enabledDates:Object.keys(calenderdaysmap).map((function(e){return moment(e,"DD-MM-YYYY").format("YYYY-MM-DD")}))}},isActive:function(){}},watch:{},methods:(e={sessionchanged:function(){this.myerrors=[]},onChange:function(){this.myerrors=[]},addRow:function(){this.insertElement(this.form.punchings.length)},insertElement:function(e){var n=this;if(this.rowsvalid()){this.myerrors=[];e>0&&n.form.punchings.length>=e&&n.form.punchings[e-1];this.form.punchings.splice(e,0,{date:"",punchin:"",punchout:""}),this.$nextTick((function(){n.$refs["field-"+e][0].$el.focus()}))}},removeElement:function(e){this.form.punchings.splice(e,1),this.myerrors=[]},limitText:function(e){return"and ".concat(e," more")},asyncFind:_.debounce((function(e){this.mydelayedsearch(e),this.myerrors=[]}),500),mydelayedsearch:function(e){var n=this;e.length>=3&&axios.get(urlajaxpen+"/"+e).then((function(e){n.pen_names=e.data.pen_names,n.pen_names_to_desig=e.data.pen_names_to_desig})).catch((function(e){}))},clearAll:function(){this.pen_names=[],this.pen_names_to_desig=[]}},t(e,"limitText",(function(e){return"and ".concat(e," other countries")})),t(e,"changeSelect",(function(e,n){this.myerrors=[];var t=this;t.$nextTick((function(){if(t.form.pen==e)t.pen_names_to_desig[e]}))})),t(e,"updateSelect",(function(e,n){})),t(e,"checkDuplicates",(function(){for(var e=this,n={},t=0;t<e.form.punchings.length;t++){if(null!=n[e.form.punchings[t].date])return this.myerrors.push("Duplicate date found: "+e.form.ovepunchingsrtimes[t].date),!1;n[e.form.punchings[t].date]=!0}return!0})),t(e,"rowsvalid",(function(){this.myerrors=[];var e=this;if(""==e.form.session||""==e.form.pen)return this.$swal("Oops","Please select session/pen","error"),!1;for(var n=0;n<e.form.punchings.length;n++){var t=e.form.punchings[n];if(""==t.date||""==t.punchin||""==t.punchout)return this.$swal("Row: "+(n+1),"Fill all the fields in every row","error"),!1}for(n=0;n<e.form.overtimes.length;n++)if(e.form.punchings[n].punchin=e.form.punchings[n].punchin.trim(),e.form.punchings[n].punchout=e.form.punchings[n].punchout.trim(),e.form.punchings[n].punchin=r(e.form.punchings[n].punchin),e.form.punchings[n].punchout=r(e.form.punchings[n].punchout),"invalid date"==e.form.punchings[n].punchin.toLowerCase()||"invalid date"==e.form.punchings[n].punchout.toLowerCase())return e.form.punchings[n].punchin=e.form.punchings[n].punchout="",this.myerrors.push("Row "+(n+1)+": Invalid time format. Enter (HH:MM) in 24 hour format ( examples: 09:30, 17:30)."),!1;return this.checkDuplicates()})),t(e,"create",(function(){if(!this.isProcessing)if(this.isProcessing=!0,this.rowsvalid()){var e=this;if(e.form.overtimes.length<=0)return this.$swal("Oops","Need at least one row!","error"),this.isProcessing=!1,!1;axios.post(urlformsubmit,e.form).then((function(n){n.data.created?window.location.href=urlformsucessredirect+"/"+n.data.id:e.isProcessing=!1})).catch((function(n){e.$swal({type:"error",title:"Error",text:"Please see the error(s) shown in red at the top",timer:2500});var t=n.response;e.isProcessing=!1,e.errors=t.data}))}else this.isProcessing=!1})),t(e,"update",(function(){if(!this.isProcessing)if(this.isProcessing=!0,this.rowsvalid()){var e=this;if(e.form.overtimes.length<=0)return this.$swal("Oops","Need at least one row!","error"),this.isProcessing=!1,!1;var n=urlformsubmit+"/"+e.form.id;axios.put(n,e.form).then((function(n){n.data.created?window.location.href=urlformsucessredirect+"/"+n.data.id:e.isProcessing=!1})).catch((function(n){e.$swal({type:"error",title:"Error",text:"Please read the error(s) shown in red at the top",timer:2500});var t=n.response;e.isProcessing=!1,e.errors=t.data}))}else this.isProcessing=!1})),e)});window.addEventListener("keydown",(function(e){if(!e.defaultPrevented){var n=!1;void 0!==e.key?"F4"==e.key?(i.copytimedownonerow(),n=!0):"`"==e.key&&(i.addRow(),n=!0):void 0!==e.keyIdentifier||e.keyCode,n&&e.preventDefault()}}),!0)})();